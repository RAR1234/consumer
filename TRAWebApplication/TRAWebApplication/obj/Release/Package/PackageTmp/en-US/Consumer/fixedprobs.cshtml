@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="robots" content="index, follow" />
    <meta name="keywords" content="TRA, Bahrain telecommunications, telecom consumer dispute, telecom complaints, submit complaint, consumer portal" />
    <meta name="description" content="Maintaining effective communication between TRA, consumers and the telecommunications service providers." />

    <!-- ================= Favicons ================== -->
    <!-- Standard -->
    <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="shortcut icon" href="../images/favicon.png">
    <!-- Retina iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="144x144" href="../images/favicon-retina-ipad.png">
    <!-- Retina iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="114x114" href="../images/favicon-retina-iphone.png">
    <!-- Standard iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="72x72" href="../images/favicon-standard-ipad.png">
    <!-- Standard iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="57x57" href="../images/favicon-standard-iphone.png">
    <title>Fixed Probs  - Consumer Portal | Telecommunications Regulatory Authority, Kingdom of Bahrain</title>

    <!--=============== css  ===============-->
    <!-- Reset CSS -->
    <link href="../css/reset.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- jQuery UI -->
    <link rel="stylesheet" type="text/css" href="../css/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="../css/dataTables.bootstrap.css">

    <!-- Main CSS -->
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/form-style.css" rel="stylesheet">
    <link href="../css/form-style2.css" rel="stylesheet">

    <!-- Selectize -->
    <link rel="stylesheet" href="../css/selectize.default.css">
    @*<link href="~/signature-pad-master/assets/jquery.signaturepad.css" rel="stylesheet" />*@

    <!--<link href="css/style-02.css" rel="stylesheet">-->
    <link href="../css/megamenu.css" rel="stylesheet">
    <link href="../css/navik.menu.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/flaticon.css" rel="stylesheet">

    <!-- Owl Stylesheets -->
    <link rel="stylesheet" href="../assets/owlcarousel/assets/owl.carousel.min.css">
    <!--<link rel="stylesheet" href="assets/owlcarousel/assets/owl.theme.default.min.css">-->
    <!-- FancyBox -->
    <link href="../css/jquery.fancybox.css" rel="stylesheet">

    <!-- DateTime Picker -->
    <link href="../css/bootstrap-datetimepicker.css" rel="stylesheet">

    <!-- Sweet Alert -->
    <link rel="stylesheet" href="../css/sweetalert2.css">

    <!-- Dropzone -->
    <link rel="stylesheet" href="../css/dropzone.css">

    <!-- Tooltip -->
    <link rel="stylesheet" type="text/css" href="../css/tooltipster.bundle.css" />
    <link rel="stylesheet" type="text/css" href="../css/tooltipster-follower.css" />
    <link rel="stylesheet" type="text/css" href="../css/tooltipster-sideTip-shadow.min.css" />
    <style type="text/css">

        .overlay {
            position: fixed;
            top: 0;
            display: none;
            z-index: 1000;
            height: 100%;
            background: rgba(33, 33, 33, 0.6);
            width: 100%;
        }

        #spnId {
            top: 45%;
            left: 45%;
            position: fixed;
        }
    </style>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!-- [if lt IE 9] >
    <script src="js/html5shiv.min.js" > </script >
    <script src="js/respond.min.js" > </script >
    <![endif] -->
    <!-- [if gte IE 9]
        <style type="text/css" > .gradient {
            filter: none;
        }
    </style>
    <![endif]-->

    <script src="../js/modernizr.js"></script> <!-- Modernizr runs quickly on page load to detect features -->
    <script src="../js/scrollreveal.js"></script> <!-- ScrollReveal -->

</head>

<body>

    <!-- *** LOADING *** -->
    <!-- Clean fade-in effect for webpage -->
    <script>document.body.className += ' fade-out';</script>

    <!-- *** / LOADING *** -->

    <div id="page d-flex align-items-stretch">

        <!--==============================================
            Header Area
        ===============================================-->

        <div class="cd-main-header">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <ul class="cd-header-buttons">
                            <li><a class="hotline" href="tel:81188"><span class="hotlinenumber">81188</span> <span class="des">(Consumer Contact Center)</span></a></li>
                            <li><a class="language-switch" href="~/Ar-Bh/Consumer/index.html">عربي</a></li>
                        </ul>
                        <!-- cd-header-buttons -->
                    </div>
                </div>
            </div>
        </div>
        <div class="navik-header header-shadow navik-mega-menu mega-menu-fullwidth">
            <div class="container">

                <!-- Navik header -->
                <div class="navik-header-container">

                    <!--Logo-->
                    <div class="logo" data-mobile-logo="../images/TRA-logo.png" data-sticky-logo="../images/TRA-sticky-logo.png"> <a href="index.html"><img src="../images/TRA-logo.png" alt="TRA logo" /></a> </div>
                </div>
            </div>
        </div>
        <main>

            <section class="formsection">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="formcontainer">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="main-title">
                                            <div class="icon-case"><span class="fa fa-file-text-o"></span></div>
                                            <h2 class="fs-title text-center mb20">Fixed Probs</h2>
                                            <h4 class="text-center pb0">Case Reference Number/رقم الشكوى: <span id="caseNos"></span></h4>
                                        </div>
                                    </div>

                                    <div class="col-md-12 pb30">
                                        @{

                                            @Html.Hidden("app", Html.Raw(System.Configuration.ConfigurationManager.AppSettings["basicAuth"]))
                                            @Html.Hidden("emptySignData", Html.Raw(System.Configuration.ConfigurationManager.AppSettings["isEmptySign"]))
                                            @Html.Hidden("clearSignData", Html.Raw(System.Configuration.ConfigurationManager.AppSettings["clearSignData"]))

                                        }



                                        <div class="case-status-wrapper">
                                            <ul class="case-status-list">
                                                <li>Date Submitted: <span id="dateSubmit"></span></li>
                                                <li>Type of Case: <span id="typecase"></span></li>
                                                <!--<li>Status: <span>In Progress</span></li>-->
                                            </ul>
                                        </div>
                                        <fieldset id="editProfileFS">
                                            <div id="divConsent" @*style="display:none"*@>
                                                <div class="col-md-12">
                                                    <h4 class="mb30">Fixed Probs Details</h4>
                                                </div>

                                                <input type="hidden" id="contacts" />
                                                <input type="hidden" id="complaints" />

                                                <input type="hidden" id="serviceProviders" />



                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="txtname1" maxlength="50" value="" disabled>
                                                            <label class="temp_input_label" for="txtname1"><span class="temp_input_label-content">Full Name/اسم المستهلك</span></label>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="txtprovider1" maxlength="50" value="" disabled>

                                                            <label class="temp_input_label" for="txtnation1"><span class="temp_input_label-content">Service Provider/مزود الخدمة</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>


                                                <div class="col-md-6 qos">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="txtflatnumber" maxlength="150" mandatory>
                                                            <label class="temp_input_label" for="txtflatnumber"><span class="temp_input_label-content">Flat*/الشقه*</span></label>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 qos">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="txtbuildingnumber" maxlength="150" mandatory>
                                                            <label class="temp_input_label" for="txtbuildingnumber"><span class="temp_input_label-content">Building/Villa*/لمبنى/ فيلا*</span></label>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 qos">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="txtroadnumber" maxlength="150" mandatory>
                                                            <label class="temp_input_label" for="txtroadnumber"><span class="temp_input_label-content">Road/Street*/الشارع*</span></label>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 qos">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="txtblocknumber" maxlength="9" mandatory number>
                                                            <label class="temp_input_label" for="txtblocknumber"><span class="temp_input_label-content">Block*/المجمع*</span></label>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap selectbox input--filled">
                                                            <input class="temp_input_field areatypeselector selectorautocomplete" type="text" id="txtarea" mandatory   maxlength="50">
                                                            <span class="fa fa-fw fa-caret-down field-icon toggle-selecticon"></span>
                                                            <label class="temp_input_label" for="txtarea"><span class="temp_input_label-content">Area*/المنطقة*</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>


                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field packetselector" type="text" id="txtpackage" mandatory maxlength="50" value="">
                                                            @*<span class="fa fa-fw fa-caret-down field-icon toggle-selecticon"></span>*@
                                                            <label class="temp_input_label" for="txtpackage"><span class="temp_input_label-content">Package Name*/اسم الباقه*</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field" type="text" id="accessNwtc" mandatory maxlength="50" value="">
                                                            <label class="temp_input_label" for="accessNwtc"><span class="temp_input_label-content">Access Network Technology*/تقنية شبكة النفاذ*</span></label>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="downloadThr" mandatory maxlength="50" value="">
                                                            @*<span class="fa fa-fw fa-caret-down field-icon toggle-selecticon"></span>*@
                                                            <label class="temp_input_label" for="downloadThr"><span class="temp_input_label-content">Download Threshold*/سعة تنزيل البيانات *</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="downloadspd" mandatory maxlength="50" value="">

                                                            <label class="temp_input_label" for="downloadspd"><span class="temp_input_label-content">Download Speed(Mbps)*/سرعة تنزيل البيانات (ميجابيت)*</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="uploadspd" mandatory maxlength="50" value="">

                                                            <label class="temp_input_label" for="uploadspd"><span class="temp_input_label-content">Upload Speed(Mbps)*/سرعة تحميل البيانات (ميجابيت)*</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="throttlespdDwn" maxlength="50" value="">

                                                            <label class="temp_input_label" for="throttlespdDwn"><span class="temp_input_label-content">Throttle Speed Download/تقييد سرعة تنزيل البيانات</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="temp-span-wrap temp-span-input-label-wrap input--filled">
                                                            <input class="temp_input_field nationselector" type="text" id="throttlespdupload"  maxlength="50" value="">

                                                            <label class="temp_input_label" for="throttlespdupload"><span class="temp_input_label-content">Throttle Speed Upload/تقييد سرعة تحميل البيانات</span></label>
                                                            <div class="selectorautocompletemenu"></div>
                                                        </span>
                                                    </div>
                                                </div>


                                                <div class="col-md-12">
                                                    <div class="form-group" style="float:right">
                                                        <form method="post" action="" class="sigPad">

                                                            @*<p class="drawItDesc">Draw your signature</p>*@
                                                            <ul class="sigNav">

                                                                <li class="drawIt"><a href="#draw-it">Draw It/ارسم التوقيع</a></li>
                                                                <li class="clearButton"><a href="#clear">Clear/امسح</a></li>
                                                            </ul>
                                                            <div class="sig sigWrapper">
                                                                <div class="typed"></div>
                                                                <canvas class="pad" width="298" height="55" id="canvas"></canvas>

                                                                <input type="hidden" name="output" class="output">
                                                            </div>
                                                            <span style="color:red;display:none;" id="spndata">Please draw your signature.</span>


                                                        </form>

                                                        <label class="temp_input_label" for="txtnation1"><span class="temp_input_label-content" id="spnSign">Signature*/التوقيع*</span></label>

                                                    </div>
                                                </div>

                                                <br />

                                                <div class="col-md-12 text-center mt15 mb30">
                                                    <input type="button" id="btnCancel" class="btn btn-style-4" value="Cancel" />
                                                    <input type="submit" class="submitConsent btn btn-style-4" id="btnfixedprobsSubmit" value="Submit">

                                                </div>


                                            </div><br /><br />
                                            <div class="alert alert-danger" id="consentExpiryDiv" role="alert" style="text-align:center;display:none;font-size:large">The link has expired. Please visit the TRA portal for more information on your case.</div>
                                        </fieldset>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- END formsection -->

        </main>
        <!--main -END -->
        <!--==============================================
            Footer Section
        ===============================================-->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-md-push-4 col-sm-6 col-xs-12">
                        <ul class="footer-logos">
                            <li><a href="https://www.bahrain.bh/wps/portal/QuickLinks_en?current=true&urile=wcm:path:egovportal_en/LANDING%20PAGES/Bahrain2030" target="_blank"><img src="../images/2030.png" width="65" height="60" alt="Bahrain 2030"></a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-md-push-4 col-sm-6 col-xs-12">
                        <div class="social-txt">Connect with us :</div>
                        <ul class="social-icons">
                            <li><a href="https://www.instagram.com/trabahrain/" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i><span class="sr-only">TRA Instagram</span></a></li>
                            <li><a href="https://twitter.com/trabahrain/" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">TRA Twitter</span></a></li>
                            <li><a href="https://www.facebook.com/trabahrain/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i><span class="sr-only">TRA Facebook</span></a></li>
                            <li><a href="https://www.youtube.com/channel/UCrJmBEJd1LvLD-jcxIzbidQ/" target="_blank"><i class="fa fa-youtube" aria-hidden="true"></i><span class="sr-only">TRA YouTube</span></a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-md-pull-8 col-sm-12 col-xs-12">
                        <p class="copyright">
                            &copy;
                            <script type="text/javascript">var d = new Date(); document.write(d.getFullYear());</script> Telecommunications Regulatory Authority<br>
                            Kingdom of Bahrain.
                        </p>
                        <p class="footer-links"><a href="https://www.tra.org.bh/en/en/category/privacy-policy" target="_blank">Privacy Policy</a> / <a href="https://www.tra.org.bh/en/en/en/category/terms-and-conditions" target="_blank">Terms &amp; Conditions</a></p>
                    </div>
                </div>
                <!--.row -END -->
            </div>
            <!--.container -END -->
        </footer>
        <div class="cd-overlay"></div>

        <div class="modal fade" tabindex="-1" id="viewModal" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h5 class="modal-title">TRA says</h5>

                    </div>
                    <div class="modal-body">
                        <p>
                            Fixed Probs data will now be submitted to the Authority. Do you wish to continue?/سيتم إرسال بيانات اجهزه القياس الثابتة للمراجعة. استمر؟
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="modalSubmit">Yes/ارسال</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close/الغاء </button>

                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" id="cancelModal" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h5 class="modal-title">TRA says</h5>

                    </div>
                    <div class="modal-body">
                        <p>This Fixed Probs will now be cancelled and will not be processed further. Do you wish to cancel the case?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="modalcancel">Yes</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                    </div>
                </div>
            </div>
        </div>


        <div class="overlay">
            <div class="spinner-loading" id="spnId"><i class="fa fa-spinner fa-pulse fa-3x fa-fw" aria-hidden="true"></i><span class="sr-only">Loading...</span></div>
        </div>


    </div>
    <!--.page -END -->
    <!-- JavaScripts
        ================================================== -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->

    <script src="../../Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/signature-pad-master/jquery.signaturepad.js"></script>
    <script type="text/javascript" src="../js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="../js/jquery-ui.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/bootstrapvalidator.min.js"></script>
    <!--<script src="js/validator.min.js"></script>-->

    <script type="text/javascript" src="../js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="../js/dataTables.bootstrap.min.js"></script>


    <!-- Navik Menu js -->
    <script type="text/javascript" src="../js/navik.menu.js"></script>

    <!-- OwlCarousel js-->
    <script type="text/javascript" src="../assets/owlcarousel/owl.carousel.js"></script>

    <!-- Fancybox js -->
    <script type="text/javascript" src="../js/jquery.fancybox.min.js"></script>

    <!-- File Uploader js -->
    <script type="text/javascript" src="../js/dropzone.js"></script>

    <!-- Custom js -->
    <script type="text/javascript" src="../js/main.js"></script>

    <!-- Side Nav js -->
    <script type="text/javascript" src="../js/side-nav.js"></script>

    <!-- Form js -->
    <script type="text/javascript" src="../js/form.js"></script>
    <script type="text/javascript" src="../js/stepform.js"></script>

    <!-- DateTime Picker js -->
    <script type="text/javascript" src="../js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript">
        var strtdt = new Date();
        strtdt.setFullYear(strtdt.getFullYear() - 16);

        $('.complaint_date').datetimepicker({
            language: 'en',
            weekStart: 0,
            todayBtn: 0,
            autoclose: 1,
            todayHighlight: 0,
            keyboardNavigation: true,
            pickerPosition: "bottom-left",
            startView: 4,
            minView: 2,
            forceParse: 0,
            endDate: new Date()
        });
        $("#viewModal").on("hidden.bs.modal", function () {

        });
    </script>

    <!-- Sweetalert js -->
    <script type="text/javascript" src="../js/sweetalert2.min.js"></script>
    <script type="text/javascript" src="../js/promise-polyfill.js"></script>

    <!-- Tooltipster js -->
    <script type="text/javascript" src="../js/tooltipster.bundle.min.js"></script>
    <script type="text/javascript" src="../js/tooltipster-follower.js"></script>
    <script>
        $(document)
            .ajaxStart(function () {
                //$('.spinner-loading').show();
                $(".overlay").show();
            })
            .ajaxStop(function () {
                //   $('.spinner-loading').hide();
                $(".overlay").hide();
            });
    </script>
    <script>
        $(document).ready(function () {
            $('.tooltipz').tooltipster({
                theme: 'tooltipster-shadow',
                side: 'bottom',
                trigger: 'click',
                maxWidth: 300
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(function () {
                $(".replylink a").click(function () {
                    $(this).parent().parent().find(".replycomment").slideToggle(400);
                    return false;
                });
                $("a.attachments").click(function () {
                    $(this).parent().parent().find(".attachment-box").slideToggle(400);
                    return false;
                });
            });

        });
    </script>
    <script type="text/javascript">
        Dropzone.autoDiscover = false;
        $(".dropzone.multipleFile").dropzone({
            maxFiles: 10,
            maxFilesize: 2,
            dictDefaultMessage: "Drag and drop files here or click to upload (Multiple files allowed)"
        });
        $(".dropzone.singleFile").dropzone({
            maxFiles: 1,
            maxFilesize: 2,
            dictDefaultMessage: "Drag and drop file here or click to upload (Single file allowed)"
        });
    </script>

    <!-- Smiley Feedback js -->
    <script type="text/javascript" src="../js/feedback.js"></script>

    <!-- Clean fade-in effect for webpage -->
    <script type="text/javascript">
        $(function () {
            $('body').removeClass('fade-out');
        });
    </script>
    <script>
        var areaArray = [];
        var areaId;


        var queryString = new Array();
        var caseId;
        var current_fs;
        $(function () {

            if (queryString.length == 0) {
                if (window.location.search.split('?').length > 1) {
                    var params = window.location.search.split('?')[1].split('&');
                    for (var i = 0; i < params.length; i++) {
                        var key = params[i].split('=')[0];
                        if (key == "caseId") {
                            caseId = decodeURIComponent(params[i].split('=')[1]);
                            queryString[key] = caseId;
                        }


                    }
                }
            }
            ////////////////////////////////////////////////////////////////////////////////


              function getArea() {

                $.ajax({

                    type: "GET",
                    headers: {
                         "Authorization": "Basic " + $("#app").val()
                    },

                    url: window.location.origin + "/api/EnglishConsumer/getArea",
                    dataType: "json",
                    contentType: "application/json",
                    success: function (res) {
                        $.each(res, function (data, value) {

                            areaArray.push(value);

                        })
                    }, error: function (jqXHR) {

                        if (jqXHR.status == "401") {
                            $("#errorModal").modal("show");
                        } else if (jqXHR.status == "500") {
                            redirect();
                            window.location.href = "error.html";

                        } else {
                            redirect();
                            window.location.href = "error.html";
                        }

                    }

                });
            };

            $(document).ready(function () {

                $('.sigPad').signaturePad();
                getfixedProbsDetails();
                getArea();
            });

            function getfixedProbsDetails() {

                $.ajax({
                    type: "GET",

                    url: window.location.origin + "/api/EnglishConsumer/getFixedprobs?caseId=" + caseId,
                    headers: {
                        "Authorization": "Basic " + $("#app").val()
                    },
                    datatype: "JSON",
                    contentType: "application/json",

                    success: function (result) {
                        if (result != null) {
                            //if (result.IsFixedProbs == true) {
                                $("#divConsent").show();
                                if (result._caseData != null) {
                                    var caseDesciptionData = result._caseData;
                                    $("#caseNos").text(caseDesciptionData.caseNo);
                                    $("#dateSubmit").text(caseDesciptionData.createOn);
                                    $("#typecase").text(caseDesciptionData.caseType);
                                    $("#txtaddress").val(caseDesciptionData.address);
                                    $("#txtname1").val(caseDesciptionData.fullname);
                                    $("#txtcomplaint1").val(caseDesciptionData.complaintType);

                                    $("#txtprovider1").val(caseDesciptionData.serviceProvider);

                                    $("#contacts").val(caseDesciptionData.contactid);

                                    ///
                                    $("#txtflatnumber").val(caseDesciptionData.flat);
                                    $("#txtbuildingnumber").val(caseDesciptionData.building);
                                    $("#txtroadnumber").val(caseDesciptionData.road);
                                    $("#txtblocknumber").val(caseDesciptionData.block);

                                    $("#txtarea").text(caseDesciptionData.label);
                                    $("#txtarea").val(caseDesciptionData.label);
                                    areaId = caseDesciptionData.value;


                                    $("#complaints").val(caseDesciptionData.complaintId);
                                    $("#serviceProviders").val(caseDesciptionData.serviceProviderId);

                                }


                            //} else if (result.IsFixedProbs == false) {
                            //    $("#consentExpiryDiv").show();
                            //}


                        }
                    },
                    error: function (jqXHR) {

                        if (jqXHR.status == 500) {
                            window.location.href = "error.html";
                        } else {
                            window.location.href = "error.html";
                        }
                    }
                });
            }
           $("#txtarea").keydown(function (event) {
                return false;
            });


            $("#btnfixedprobsSubmit").on("click", function () {


                current_fs = $(this).parent().parent();

                if (validateinputs(current_fs)) {

                    var IsSignature = getSinature();

                    if (IsSignature == true) {
                        $("#viewModal").modal("show");
                    }
                    else {
                        return false;
                    }
                }
                else {
                    return false;
                }

            });

            function getSinature() {

                var myCanvas1 = document.getElementById("canvas");
                var signatureData = myCanvas1.toDataURL();
                var emptySignatureData = $("#emptySignData").val();
                var clearSignData = $("#clearSignData").val();
                if (signatureData == emptySignatureData) {

                    $("#spnSign").tooltipster({
                        theme: 'tooltipster-shadow',
                        content: '<font size="2" color="#cf152d">Please draw your signature here!</font>',
                        contentAsHTML: true,
                        side: 'bottom',
                        maxWidth: 300,
                        trigger: 'custom'
                    });
                    $("#spnSign").tooltipster('open');
                    $("#spnSign").focus();
                    return false;

                } else if (signatureData == clearSignData) {
                    $("#spnSign").tooltipster({
                        theme: 'tooltipster-shadow',
                        content: '<font size="2" color="#cf152d">Please draw your signature here!</font>',
                        contentAsHTML: true,
                        side: 'bottom',
                        maxWidth: 300,
                        trigger: 'custom'
                    });
                    $("#spnSign").tooltipster('open');
                    $("#spnSign").focus();
                    return false;
                }
                else {
                    $("#spnSign").tooltipster({});
                    $("#spnSign").tooltipster("destroy");

                    return true;
                }
            }
            $("#modalSubmit").on("click", function () {

                $("#viewModal").modal("hide");

                var fixedprobsData = {

                    contactid: $("#contacts").val(),

                    serviceProviderId: $("#serviceProviders").val(),
                    ticketno: $("#caseNos").text(),
                    flat: $("#txtflatnumber").val(),
                    buildingno: $("#txtbuildingnumber").val(),
                    roadno: $("#txtroadnumber").val(),
                    blockno: $("#txtblocknumber").val(),
                    packageName: $("#txtpackage").val(),
                    fullname: $("#txtname1").val(),
                    accessNetworkTech: $("#accessNwtc").val(),
                    downloadThreshold: $("#downloadThr").val(),
                    downloadspeed: $("#downloadspd").val(),
                    uploadSpeed: $("#uploadspd").val(),
                    throttlespdDwnload: $("#throttlespdDwn").val(),
                    throttlespdupload: $("#throttlespdupload").val(),
                    area: areaId,
                    signature: document.getElementById("canvas").toDataURL(),
                    caseId: caseId

                };

                $.ajax({

                    url: window.location.origin + "/api/EnglishConsumer/postfixedProbsData",
                    headers: {
                        "Authorization": "Basic " + $("#app").val()
                    },

                    data: JSON.stringify(fixedprobsData),
                    type: "POST",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    success: function (result) {

                        if (result != null) {

                            if (result.errorCode == 200) {

                                successFixedProbs();
                            }
                        }

                    },
                    error: function (jqXHR) {

                        if (jqXHR.status == "500") {

                            window.location.href = "error.html";
                        }
                        else {

                            window.location.href = "error.html";

                        }

                    }
                });

            });


            function successFixedProbs() {

                current_fs = $(this).parent().parent();

                if (validateinputs(current_fs)) {

                    Swal.fire({

                        icon: 'success',
                        title: 'Success!',
                        confirmButtonText: 'Ok',
                        showCancelButton: false,
                        cancelButtonText: 'Go to Dashboard',

                        html:
                            '<p>Fixed Probs form has been submitted successfully.</p>'
                    }).then(function (result) {

                        if (result.dismiss == 'cancel') {

                        }
                        else {
                            window.location.href = window.location.origin + "/en-US/Consumer/index.html";
                        }
                    })
                }
                return false;
            };

            function dateodagainstsp(obj) {

                var date = new Date(obj);
                var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                var newDate = months[date.getMonth()];
                var day = date.getDate();
                var year = date.getFullYear();

                var consumerDate = newDate + " " + day + "," + year;
                return consumerDate;

            }



            $("#btnCancel").on("click", function () {

                window.location.href = window.location.origin + "/en-US/Consumer/index.html";
                //$("#cancelModal").modal("show");
            })

            $("#modalcancel").on("click", function () {
                $("#cancelModal").modal("hide");
                $.ajax({
                    type: "GET",

                    url: window.location.origin + "/api/EnglishConsumer/CancelConsent?caseId=" + caseId,
                    headers: {
                        "Authorization": "Basic " + $("#app").val()
                    },
                    datatype: "JSON",
                    contentType: "application/json",

                    success: function (result) {
                        if (result.errorCode == 200) {
                            cancelConsent();
                        }
                    },
                    error: function (jqXHR) {

                    }
                })
            });


            function cancelConsent() {

                current_fs = $(this).parent().parent();

                if (validateinputs(current_fs)) {

                    Swal.fire({

                        icon: 'success',
                        title: 'Success!',
                        confirmButtonText: 'Ok',
                        showCancelButton: false,
                        cancelButtonText: 'Go to Dashboard',

                        html:
                            '<p>Your case has been cancelled.</p>'
                    }).then(function (result) {

                        if (result.dismiss == 'cancel') {

                        }
                        else {
                            window.location.href = window.location.origin + "/en-US/Consumer/index.html";
                        }
                    })
                }
                return false;
            };


        });
    </script>
    <script>

        $(function () {

            $(".areatypeselector").each(function () {

                $(this).autocomplete({
                    source: areaArray,
                    select: function (e, ui) {
                        e.preventDefault() // <--- Prevent the value from being inserted.

                        $(this).val(ui.item.label);
                        areaId = ui.item.value;
                        $(this).attr('value', ui.item.label);

                        $(this).next('.toggle-selecticon').removeClass('fa-caret-down').addClass('fa-caret-up');
                        document.activeElement.blur();
                        try {
                            $(this).tooltipster('destroy');
                        }
                        catch (ex) { }
                    },
                    classes: {
                        "ui-autocomplete": "highlight"
                    },
                    minLength: 0,
                    appendTo: $(this).parent().children('.selectorautocompletemenu'),
                    close: function () {
                        $(this).next('.toggle-selecticon').toggleClass("fa-caret-up fa-caret-down");
                    }
                }).focus(function () {
                    $(this).autocomplete('search', '');
                    $(this).next('.toggle-selecticon').toggleClass("fa-caret-down fa-caret-up");
                });
            });
            var selectItem = function (event, ui) {
                this.val(ui.item.value);
                return false;
            }
        });
        //$(".msform").submit(function (e) {
        //    e.preventDefault();
        //});
    </script>

</body>
</html>